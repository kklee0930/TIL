### ğŸ’»Namespace

- ê°œì²´ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê²ƒì´ namespace(ì´ë¦„ ê³µê°„)

```python
# pages/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path('index/', views.index, name='index'),
]

# pages/views.py

def index(request):
    return render(request, 'index.html')
```

```html
<!-- pages/templates/index.html -->

{% extends 'base.html' %} {% block %}
<h1>ë‘ë²ˆ ì§¸ ì•±ì˜ index</h1>
{% endblock %}

<!-- articles/templates/index.html -->

{% extends 'base.html' %} {% block %}
<h1>ë§Œë‚˜ì„œ ë°˜ê°€ì›Œìš”!</h1>
<a href="{% url 'greeting' %}">greeting</a>
<a href="{% url 'dinner' %}">dinner</a>
<a herf="{% url 'throw' %}">throw</a>

<a href="{% url 'index' %}">ë‘ë²ˆì§¸ ì•± indexë¡œ ì´ë™</a>
{% endblock %}
```

â›”pagesì—ì„œë„ ê°™ì€ index.htmlê°€ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— articlesì˜ index.htmlë¡œ ì´ë™í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ pagesì˜ index.htmlë¡œ ì´ë™í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

#### URL namespace

ğŸŒŸì´ë¥¼ ë§‰ê¸° ìœ„í•´ì„œ URL namespaceë¥¼ í™œìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ ì•±ì—ì„œ ë™ì¼í•œ URL ì´ë¦„ì„ ì´ìš©í•˜ëŠ” ê²½ìš°ì—ë„ ì˜ë„í•œ URLë¡œ ì´ë™í•˜ê²Œ í•œë‹¤

- app_name attributeë¥¼ ì‘ì„±í•´ URL namespaceë¥¼ ì„¤ì •

```python
# articles/urls.py

app_name = 'articles'
urlpatterns = [
    ...,
]

# pages/urls.py

app_name = 'pages'
urlpatterns = [
    ...,
]
```

##### ì ìš© ì˜ˆì‹œ

```html
{% url 'index' %}ë¥¼ {% url 'articles:index' %}ë¡œ ë³€ê²½
```

```html
<!-- articles/templates/index.html -->
{% extends 'base.html' %} {% block content %}
<h1>ë§Œë‚˜ì„œ ë°˜ê°€ì›Œìš”!</h1>
<a href="{% url 'articles:greeting' %}">greeting</a>
<a href="{% url 'articles:dinner'%}">dinner</a>
<a href="{% url 'articles:throw'%}">throw</a>

<a herf="{% url 'pages:index' %}">ë‘ë²ˆ ì§¸ ì•± indexë¡œ ì´ë™</a>
{% endblock content %}
```

### ğŸ’»Template namespace

- ë‹¨ì¼ ì•±ìœ¼ë¡œë§Œ ì´ë£¨ì–´ì§„ í”„ë¡œì íŠ¸ë¼ë©´ ìƒê´€ì—†ì§€ë§Œ,

- ì—¬ëŸ¬ ì•±ìœ¼ë¡œ ì´ë£¨ì–´ì¡Œì„ ê²½ìš° í…œí”Œë¦¿ íŒŒì¼ ì´ë¦„ì´ ê²¹ì¹˜ë©´ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆê¸°ì— êµ¬ë¶„í•˜ëŠ” ê²ƒì´ í•„ìš”í•¨

#### Naming URL patterns

- DTLì˜ Tag ì¤‘ í•˜ë‚˜ì¸ URL íƒœê·¸ë¥¼ ì‚¬ìš©í•´ì„œ path() í•¨ìˆ˜ì— ì‘ì„±í•œ name ì‚¬ìš©

- URLì— ì´ë¦„ì„ ì§€ì •í•˜ì—¬ view í•¨ìˆ˜ì™€ í…œí”Œë¦¿ì—ì„œ íŠ¹ì • ì£¼ì†Œ ì‰½ê²Œ ì°¸ì¡°í•˜ë„ë¡ í•¨

```python
# articles/urls.py

urlpatterns = [
    path('index/', views.index, name='index'),
    path('greeting/', views.greeting, name='greeting'),
    path('dinner/', views.dinner, name='dinner'),
    path('throw/', views.throw, name='throw'),
    path('catch/', views.catch, name='catch'),
    path('hello/<str:name>/', views.hello, name='hello'),
]
```

#### Built-in tag "url"

`{% url '' %}`ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤.

```html
<!-- catch.html -->

{% extends 'base.html' %} {% block %}
<h1>Catch</h1>
<h2>ì—¬ê¸°ì„œ {{ message }}ë¥¼ ë°›ëŠ”ë‹¤.</h2>
<a href="{% url 'throw' %}">ë‹¤ì‹œ ë˜ì§€ëŸ¬ ëŒì•„ê°</a>
{% endblock content %}

<!-- throw.html -->

{% extends 'base.html' %} {% block %}
<h1>Throw</h1>
<form action="{% url 'catch' %}" method="GET">...</form>
<a href="{% url 'index' %}">ë’¤ë¡œ ëŒì•„ê°€ê¸°</a>
{% endblock %}

<!-- index.html -->

{% extends 'base.html' %} {% block %} ...
<a href="{% url 'greeting' %}">greeting</a>
<a href="{% url 'dinner' %}">dinner</a>
<a href="{% url 'throw' %}">throw</a>
{% endblock %}

<!-- dinner.html, greeting.html -->

<a href="{% url 'index' %}">ë’¤ë¡œ ëŒì•„ê°€ê¸°</a>
```

ğŸ¯ê°œë°œì ë„êµ¬ë¥¼ í†µí•´ ê²½ë¡œ ë°˜í™˜ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤

### ğŸ’»Django í™œìš© ì‹œ

#### Django ì„¤ê³„ ì² í•™(Templates System)

1. í‘œí˜„ê³¼ ë¡œì§(view)ì„ ë¶„ë¦¬

- í…œí”Œë¦¿ ì‹œìŠ¤í…œì€ í‘œí˜„ì„ ì œì–´í•˜ëŠ” ë„êµ¬ì´ì í‘œí˜„ì— ê´€ë ¨ëœ ë¡œì§ì¼ ë¿ì´ë‹¤

2. ì¤‘ë³µ ë°°ì œ

### ğŸ’»Djangoì˜ êµ¬ì¡°(MTV Design Pattern)

- MVC ë””ìì¸ íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ ë³€í˜•ë¨

#### MVC ì†Œí”„íŠ¸ì›¨ì–´ ë””ìì¸ íŒ¨í„´

- Model, View, Controller: ë°ì´í„° ë° ë…¼ë¦¬ ì œì–´ë¥¼ êµ¬í˜„í•˜ëŠ”ë° ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë””ìì¸ íŒ¨í„´

- Model: ë°ì´í„°ì™€ ê´€ë ¨ëœ ë¡œì§ ê´€ë¦¬

- View: ë ˆì´ì•„ì›ƒê³¼ í™”ë©´ ì²˜ë¦¬

- Controller: ëª…ë ¹ì„ modelê³¼ view ë¶€ë¶„ìœ¼ë¡œ ì—°ê²°

ğŸŒŸê° ë¶€ë¶„ì„ ë…ë¦½ì ìœ¼ë¡œ ê°œë°œì´ ê°€ëŠ¥í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ê°€ ì‰½ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤

![](220929_Web.assets/mtv.png)

### ğŸ’»Django Model

#### Database

- ì²´ê³„í™”ëœ ë°ì´í„°ì˜ ëª¨ì„

- ê²€ìƒ‰ ë° êµ¬ì¡°í™”ë¥¼ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ ì¡°ì§í™”ëœ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ì €ì¥ ì‹œìŠ¤í…œ

1. Schema

![](220929_Web.assets/schema.png)

- DBì—ì„œ ìë£Œì˜ êµ¬ì¡°, í‘œí˜„ ë°©ë²•, ê´€ê³„ ë“±ì„ ì •ì˜

2. Table

![](220929_Web.assets/table.png)

- í•„ë“œ(ì†ì„±, ì»¬ëŸ¼)ì™€ ë ˆì½”ë“œ(íŠœí”Œ, í–‰)ë¥¼ ì‚¬ìš©í•´ ì¡°ì§ëœ ë°ì´í„° ìš”ì†Œë“¤ì˜ ì§‘í•©

- ê´€ê³„(Relation)ì´ë¼ê³ ë„ ë¶€ë¦„

##### ğŸŒŸQuery(ì¿¼ë¦¬)

- ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´

- ì¡°ê±´ì— ë§ëŠ” ë°ì´í„° ì¶”ì¶œì´ë‚˜ ì¡°ì‘í•  ë•Œ ì‚¬ìš©ë¨(ì£¼ë¡œ í…Œì´ë¸”í˜• ìë£Œêµ¬ì¡°ì—ì„œ)

- "DBë¥¼ ì¡°ì‘í•œë‹¤" == "ì¿¼ë¦¬ë¥¼ ë‚ ë¦°ë‹¤"

#### Model

![](220929_Web.assets/model.png)

- DjangoëŠ” Modelì„ í†µí•´ ë°ì´í„°ì— ì ‘ê·¼í•˜ê³  ì¡°ì‘

- ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë“¤ì˜ í•„ìˆ˜ì ì¸ í•„ë“œë“¤ê³¼ ë™ì‘ì„ í¬í•¨

- ê°ê°ì˜ ëª¨ë¸ì€ í•˜ë‚˜ì˜ DB í…Œì´ë¸”ì— ë§¤í•‘(ëª¨ë¸ í´ë˜ìŠ¤ 1ê°œ == DB í…Œì´ë¸” 1ê°œ)

##### Model ì‘ì„±

1. ìƒˆ í”„ë¡œì íŠ¸(crud), ì•±(articles) ì‘ì„± ë° ì•± ë“±ë¡

```bash
$ django-admin startproject [project_name] .
$ python manage.py startapp [app_name]
```

```python
# settings.py

INSTALLED_APPS = [
    'articles',
]
```

2. models.py ì‘ì„±

- ëª¨ë¸ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì€ DB í…Œì´ë¸”ì˜ ìŠ¤í‚¤ë§ˆ ì •ì˜ì™€ ê°™ë‹¤

```python
# articles([app_name])/models.py

class Article(models.Model): # django.db.models ëª¨ë“ˆì˜ Model í´ë˜ìŠ¤ ìƒì†
    # titleê³¼ contentëŠ” DBí•„ë“œë¥¼ ë‚˜íƒ€ëƒ„
    title = models.CharField(max_length=10)
    content = models.TextField()
```

##### Django Model Field

- ëª¨ë¸í•„ë“œë¥¼ í†µí•´ í…Œì´ë¸”ì˜ í•„ë“œ(ì»¬ëŸ¼)ì— ì €ì¥í•  ë°ì´í„° ìœ í˜•(INT, TEXT ë“±) ì •ì˜

- ë°ì´í„° ìœ í˜•ì— ë”°ë¼ ë‹¤ì–‘í•œ ëª¨ë¸ í•„ë“œ ì œê³µ(DataField(), CharField() ë“±)

[Model Field References](https://docs.djangoproject.com/en/3.2/ref/models/fields/)

1. `CharField(max_length=None, **options)`

- ê¸¸ì´ì˜ ì œí•œì´ ìˆëŠ” ë¬¸ìì—´ ë„£ì„ ë•Œ ì‚¬ìš©

2. `TextField(**options)`

- ê¸€ìì˜ ìˆ˜ê°€ ë§ì„ ë•Œ ì‚¬ìš©

3. `DateTimeField()`

- datetime.datetime ì¸ìŠ¤í„´ìŠ¤ë¡œ í‘œì‹œë˜ëŠ” ë‚ ì§œ ë° ì‹œê°„ì„ ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” í•„ë“œ

- ğŸŒŸì„ íƒì¸ì

  1. `auto_now_add`

  - ìµœì´ˆ ìƒì„± ì¼ì

  - ë°ì´í„°ê°€ "ë§Œë“¤ì–´ì§ˆ ë•Œ" í˜„ì¬ ë‚ ì§œì™€ ì‹œê°„ìœ¼ë¡œ ìë™ìœ¼ë¡œ ì´ˆê¸°í™”

  2. `auto_now`

  - ìµœì¢… ìˆ˜ì • ì¼ì

  - ë°ì´í„°ê°€ "ìˆ˜ì •ë  ë•Œë§ˆë‹¤" í˜„ì¬ ë‚ ì§œì™€ ì‹œê°„ìœ¼ë¡œ ìë™ ê°±ì‹ 

ğŸŒŸì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œ models.pyëŠ” ì´ëŸ¬í•œ DB ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•œ ê²ƒì´ë‹¤

```python
# articles([app_name])/models.py

class Article(models.Model): # django.db.models ëª¨ë“ˆì˜ Model í´ë˜ìŠ¤ ìƒì†
    # titleê³¼ contentëŠ” DBí•„ë“œë¥¼ ë‚˜íƒ€ëƒ„
    title = models.CharField(max_length=10)
    content = models.TextField()
```

![](220929_Web.assets/modelpy.png)

### ğŸ’»Migrations

1. makemigrations

`$ python manage.py makemigrations`

- ëª¨ë¸ì˜ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ ìƒˆë¡œìš´ migrationì„ ë§Œë“¤ ë•Œ ì‚¬ìš©

2. migrate

- makemigrationsìœ¼ë¡œ ë§Œë“  ì„¤ê³„ë„ë¥¼ ì‹¤ì œ DBì— ë°˜ì˜í•˜ëŠ” ê³¼ì •(db.sqlite3 íŒŒì¼ì— ë°˜ì˜)

- ê²°ê³¼ì ìœ¼ë¡œ ëª¨ë¸ì˜ ë³€ê²½ì‚¬í•­ê³¼ DBë¥¼ ë™ê¸°í™”

`$ python manage.py migrate`

![](220929_Web.assets/migrate.png)

#### Model ë³€ê²½ì‚¬í•­ ë°˜ì˜

- models.pyì— ë³€ê²½ì‚¬í•­ì´ ìƒê²¼ì„ ë•Œ ì¶”ê°€ ëª¨ë¸ í•„ë“œ ì‘ì„± í›„ì— ë‹¤ì‹œ makemigrations ì§„í–‰

ğŸŒŸ2ê°œì˜ í•„ë“œê°€ ì¶”ê°€ë˜ëŠ” ìƒí™©ì´ë©° ì¶”ê°€ë˜ëŠ” ì»¬ëŸ¼ì— ëŒ€í•œ ê¸°ë³¸ ê°’ ì„¤ì • í•„ìš”í•¨

```python
# articles/models.py

class Article(models.Model):
    title = models.CharField(max_length=10)
    content = models.TextField()
    # ì¶”ê°€í•˜ëŠ” ë¶€ë¶„(2ê°œì˜ í•„ë“œ ì¶”ê°€)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
```

```bash
$ python manage.py makemigrations
```

- makemigrations í›„ì— ì„¤ê³„ë„(migration íŒŒì¼)ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸ ê°€ëŠ¥

- `$ python manage.py migrate` í†µí•´ DBì™€ ë™ê¸°í™” ì§„í–‰

#### Migration ì‹œ ë°˜ë“œì‹œ ì´ 3ê°€ì§€ëŠ” ê¸°ì–µí•˜ì

1. models.pyì—ì„œ ë³€ê²½ì‚¬í•­ ë°œìƒ

2. migration ìƒì„±(makemigrations)

3. DBì™€ ë™ê¸°í™”(migrate)

â›”ì´ëŸ¬í•œ makemigrationsìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ì„¤ê³„ë„ëŠ” .pyíŒŒì¼ì¸ë° DBì™€ ë™ê¸°í™”ë¥¼ ìœ„í•´ì„œ í•„ìš”í•œ ê²ƒì´ ORMì´ë‹¤.

### ğŸ’»ORM

- Object-Relational-Mapping

- ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜¸í™˜ë˜ì§€ ì•Šì€ ì‹œìŠ¤í…œ ê°„ì— ë°ì´í„°ë¥¼ ë³€í™˜í•˜ëŠ” í”„ë¡œê·¸ë¨ë° ê¸°ìˆ 

- DjangoëŠ” ë‚´ì¥ Django ORM ì‚¬ìš©

![](220929_Web.assets/orm.png)

#### ORM ì¥ì 

- ê°ì²´ ì§€í–¥ì  ì ‘ê·¼ìœ¼ë¡œ ì¸í•œ "ë†’ì€ ìƒì‚°ì„±"

- SQL ëª°ë¼ë„ DB ì¡°ì‘ ê°€ëŠ¥

#### ORM ë‹¨ì 

- ORM ë§Œìœ¼ë¡œëŠ” ì„¸ë°€í•œ DB ì¡°ì‘ì´ ì–´ë ¤ì›€

### ğŸ’»QuerySet API

- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ë“±ì˜ ì‚¬ì „ ì¤€ë¹„ê°€ í•„ìš”í•˜ë‹¤

```bash
# íŒŒì´ì¬ ê¸°ë³¸ ì‰˜ë³´ë‹¤ ë”ìš± ê°•ë ¥í•œ ì‰˜
$ pip install ipython
# Django í™•ì¥ í”„ë¡œê·¸ë¨ ëª¨ìŒ(shell_plus, graph model ë“±)
$ pip install django-extensions
```

```python
# settings.py
INSTALLED_APPS = [
    'articles',
    'django_extensions',
    ...,
]
```

```bash
$ pip freeze > requirements.txt
```

#### Shell

- ìš´ì˜ì²´ì œì—ì„œ ê¸°ëŠ¥ê³¼ ì„œë¹„ìŠ¤ êµ¬í˜„ì´ ê°€ëŠ¥í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í”„ë¡œê·¸ë¨

- ì‚¬ìš©ìì™€ ìš´ì˜ì²´ì œë¥¼ ì´ì–´ì£¼ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤. (ì‚¬ìš©ì <=> ì‰˜ <=> ìš´ì˜ì²´ì œ)

#### Django Shell

- ì¼ë°˜ python shellë¡œëŠ” ì¥ê³  ë‚´ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ì—†ê¸°ì— Django shell ì‚¬ìš©

- ì‹¤ìŠµì—ì„œëŠ” ë” ê°•ë ¥í•œ django-extensionì˜ shell_plus ì‚¬ìš©

```bash
$ python manage.py shell_plus
```

#### Database API

- Django ORMì„ í™œìš©í•˜ì—¬ DBë¥¼ ì¡°ì‘í•˜ëŠ” ë°©ë²•

- Model ì •ì˜ ì‹œ ë°ì´í„° CRUDê°€ ê°€ëŠ¥í•œ APië¥¼ ì œê³µ

```python
# Article = Model class
# objects = Manager
# all() = Queryset API
Article.objects.all()
```

##### Objects Manager

- Django ëª¨ë¸ì´ DB ì¿¼ë¦¬ ì‘ì—…ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤

- Django ëª¨ë¸ í´ë˜ìŠ¤ì— objectsë¼ëŠ” Manager ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•˜ê³  ì´ë¥¼ í†µí•´ ë°ì´í„° ì¡°ì‘ì´ ê°€ëŠ¥

- ì¦‰ DBë¥¼ python classë¡œ ì¡°ì‘í•  ìˆ˜ ìˆë„ë¡ ì—¬ëŸ¬ ë©”ì„œë“œ ì œê³µí•˜ëŠ” manager

##### Query

- DBì— íŠ¹ì •í•œ ë°ì´í„°ë¥¼ ë³´ì—¬ë‹¬ë¼ëŠ” ìš”ì²­(ì¿¼ë¦¬ë¥¼ ë‚ ë¦°ë‹¤, ì¿¼ë¦¬ë¬¸ì„ ì‘ì„±í•œë‹¤: ì›í•˜ëŠ” ë°ì´í„° ì–»ê¸° ìœ„í•´ DBì— ìš”ì²­ì„ ë³´ë‚¼ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤)

1. íŒŒì´ì¬ìœ¼ë¡œ ì½”ë“œ ì‘ì„±

2. ORMìœ¼ë¡œ SQlë¡œ ë³€í™˜ë˜ì–´ DBì— ì „ë‹¬, DBì˜ ì‘ë‹µ ë°ì´í„°ë¥¼ QuerySetì´ë¼ëŠ” ìë£Œí˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì œê³µ

##### QuerySet

- DBì—ê²Œì„œ ì „ë‹¬ë°›ì€ ê°ì²´ ëª©ë¡(ë°ì´í„°)

- Django ORMì„ í†µí•´ ë§Œë“¤ì–´ì§„ ìë£Œí˜•ì´ë©° í•„í„°ë‚˜ ì •ë ¬ ìˆ˜í–‰ ê°€ëŠ¥

- DBê°€ ë‹¨ì¼ëœ ë°ì´í„°ë¥¼ ë°˜í™˜í•  ë•ŒëŠ” QuerySetì´ ì•„ë‹Œ ëª¨ë¸(Class)ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë°˜í™˜ë¨

![](220929_Web.assets/queryset.png)

### ğŸ’»QuerySet API CRUD

- ì»´í“¨í„° ì—°ì‚°ì˜ ê¸°ë³¸ ë°ì´í„° ì²˜ë¦¬ ê¸°ëŠ¥ 4ê°€ì§€(Create, Read, Update, Delete)

#### Create

1. `article = Article()`: í´ë˜ìŠ¤ë¥¼ í†µí•œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

2. `article.title`: í´ë˜ìŠ¤ ë³€ìˆ˜ëª…ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ìƒì„± í›„ í• ë‹¹

3. `article.save()`: ì¸ìŠ¤í„´ìŠ¤ë¡œ save ë©”ì„œë“œ í˜¸ì¶œ
