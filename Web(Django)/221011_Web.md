### ğŸ’»Django Auth

íšŒì›ê°€ì…/ë¡œê·¸ì¸ì˜ í•„ìˆ˜ ë° ìš”êµ¬ì¡°ê±´ì´ ë¬´ì—‡ì¼ê¹Œ?

Django authentication system: ì¸ì¦ê³¼ ê¶Œí•œ ë¶€ì—¬ë¥¼ ì œê³µ(ì²˜ë¦¬)í•¨

- í•„ìˆ˜ êµ¬ì„±ì€ settings.pyì˜ INSTALLED_APPSì—ì„œ í™•ì¸ ê°€ëŠ¥


#### Django Auth ê°œìš”

- Authentication(ì¸ì¦): ì‹ ì›í™•ì¸, ëˆ„êµ°ì§€ í™•ì¸í•˜ëŠ” ê²ƒ

- Authorization(ê¶Œí•œ, í—ˆê°€): ê¶Œí•œ ë¶€ì—¬, ê¶Œí•œ ê°€ì§„ ì´ìš©ìê°€ ìˆ˜í–‰ê°€ëŠ¥í•œ ì‘ì—…ì„ ê²°ì •


#### Django User Model

- ìƒˆ í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œ ì»¤ìŠ¤í…€ User ëª¨ë¸ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê°•ë ¥í•˜ê²Œ ê¶Œì¥

- ë‚˜ì¤‘ì— í•„ìš”í•œ ê²½ìš° ë§ì¶¤ ì„¤ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸

- ëª¨ë“  model ëŒ€ì²´ ì‘ì—…ì€ migrate ì‹¤í–‰ ì „ì— ë§ˆì³ì•¼ í•¨


##### AUTH_USER_MODEL

1. settings.pyì— ëª¨ë¸ ì •ì˜
```python
# project/settings.py
AUTH_USER_MODEL = 'accounts.User'
```

2. User class ì •ì˜
```python
# app/models.py
from django.db import models
from django.contrib.auth.models import AbstractUser

# Create your models here
class User(AbstractUser):
    pass
```


##### DBì´ˆê¸°í™”

1. migrationsíŒŒì¼ ì‚­ì œ

- migrationsí´ë”ëŠ” Xì‚­ì œ

- ìˆ«ì ë¶™ì€ íŒŒì¼ë§Œ ì‚­ì œ

2. db.sqlite3 ì‚­ì œ

3. migrations ì§„í–‰

- makemigrations ë° migrate ì§„í–‰


#### Article ìœ ì € ê²Œì‹œë¬¼ ìƒì„±

- django shell_plus ë‚´ì—ì„œ ì‹¤í–‰

```python
In [1]: Article.objects.create(title='ì œëª©1', content='ë‚´ìš©1')
In [2]: User.objects.create(username='sun', content='1a2w3e4r')
```

â›”UserëŠ” ë°˜ë“œì‹œ ì•”í˜¸í™”í•˜ëŠ” ë¡œì§ì„ ì‚¬ìš©í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— createë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤!

##### ì•”í˜¸ê´€ë¦¬

- Djangoì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ PBKDF2(Password-Based Key Derivation Funciton) ì‚¬ìš©í•´ì•¼í•¨

    - ì•”í˜¸í™”ê°€ í•„ìˆ˜ì„(ë‹¨ë°©í–¥ í•´ì‹œí•¨ìˆ˜ í™œìš©í•˜ì—¬ ë‹¤ì´ì œìŠ¤íŠ¸ë¡œ ì•”í˜¸í™”, ë³µí˜¸í™”ê°€ ë¶ˆê°€ëŠ¥)

    ì˜ˆ: MD5, SHA-1, SHA-256ë“±ì´ ì¡´ì¬í•˜ë©° DjangoëŠ” SHA-256í™œìš©

ì†”íŒ…

keystretching

```python
User.objects.create_user('kim', 'hong@gmail.com', '1234')

from django.contrib.auth import authenticate

authenticate(username='kim', password='1234')
Out[]: <User: kim>

# í‹€ë¦¬ë©´ ì•Œë ¤ì£¼ì§€ì•ŠëŠ”ë‹¤.
```


```python
# appname/urls.py
from django import path

```

```python
# appname/views.py
from django.shortcuts import render

def signup(request):
    return render(request, 'accounts/signup.html')
```

```python
# appname/templates/appname/signup.html
{% extends 'base.html' %}
{% block %}
<íšŒì›ê°€ì…>
{{form.as _p}}
{% endblock %}
```

```python
from django.shortcuts import render
from django.contrib.auth.forms import UserCreationForm

def signup(request):
    # POST ìš”ì²­ ì²˜ë¦¬
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('articles.index')

    else:
        form = userCreationForm()
        context = {
            'form': form
            }
    return render(request, 'accounts/signup.html', context)
```